<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #f5f5f5;
            margin: 0;
            padding: 20px;
        }
        h1 {
            text-align: center;
        }
        .container {
            max-width: 800px;
            background: #fff;
            margin: 0 auto;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: relative;
        }
        .add-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            padding: 8px 14px;
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 50px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: center;
        }
        th {
            background: #f2f2f2;
        }
        .action-buttons button {
            background: none;
            border: none;
            cursor: pointer;
            padding: 5px;
        }
        .action-buttons i {
            font-size: 18px;
        }
        /* Modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 100;
            left: 0; top: 0;
            width: 100%; height: 100%;
            background: rgba(0,0,0,0.5);
        }
        .modal-content {
            background: #fff;
            margin: 10% auto;
            padding: 20px;
            border-radius: 8px;
            width: 350px;
            text-align: center;
        }
        .modal-content input[type="text"], .modal-content input[type="email"], .modal-content input[type="password"] {
            width: 90%;
            padding: 8px;
            margin: 5px 0;
        }
        .modal-content button {
            margin: 5px;
            padding: 6px 12px;
            border-radius: 4px;
        }
        .confirm { background: #4CAF50; color: #fff; }
        .cancel { background: #f44336; color: #fff; }
        .generate-btn {
            padding: 4px 8px;
            margin-left: 4px;
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <h1>Admin Panel</h1>
    <div class="container">
        <button class="add-btn" onclick="openAddModal()">Yangi Hodim Qo‘shish</button>
        <table id="workerTable">
            <thead>
                <tr>
                    <th>Ism Sharif</th>
                    <th>Kelgan kun</th>
                    <th>Kelgan soat</th>
                    <th>Amallar</th>
                </tr>
            </thead>
            <tbody>
            </tbody>
        </table>
    </div>

    <!-- Add Modal -->
    <div id="addModal" class="modal">
        <div class="modal-content">
            <h3>Yangi Hodim Qo‘shish</h3>
            <input type="text" id="firstname" placeholder="Ism">
            <input type="text" id="lastname" placeholder="Familiya">
            <input type="email" id="email" placeholder="Email">
            <input type="password" id="password" placeholder="Parol">
            <div>
                <input type="text" id="generateNum" placeholder="Generate Number" readonly>
                <button class="generate-btn" onclick="generateNumber()">Generate</button>
            </div>
            <div style="margin-top:10px;">
                <button class="confirm" onclick="addWorker()">Yaratish</button>
                <button class="cancel" onclick="closeAddModal()">Bekor qilish</button>
            </div>
        </div>
    </div>

    <!-- Delete Modal -->
    <div id="confirmModal" class="modal">
        <div class="modal-content">
            <p>Haqiqatan o‘chirilsinmi?</p>
            <button id="confirmDelete" class="confirm">Tasdiqlash</button>
            <button id="cancelDelete" class="cancel">Bekor qilish</button>
        </div>
    </div>

    <script>
        const fakeData = [
            { fullname: 'Ali Karimov', date: '01/05/2025', time: '09:00' },
            { fullname: 'Dilnoza Ismoilova', date: '02/05/2025', time: '10:30' },
            { fullname: 'Bekzod Toshmatov', date: '03/05/2025', time: '14:15' }
        ];

        let rowToDelete = null;

        function populateTable() {
            const table = document.getElementById('workerTable').getElementsByTagName('tbody')[0];
            fakeData.forEach(item => {
                const row = table.insertRow();
                row.insertCell(0).innerText = item.fullname;
                row.insertCell(1).innerText = item.date;
                row.insertCell(2).innerText = item.time;

                const actionsCell = row.insertCell(3);
                const actionDiv = document.createElement('div');
                actionDiv.className = 'action-buttons';

                const editBtn = document.createElement('button');
                editBtn.innerHTML = '<i class="fas fa-pen"></i>';
                editBtn.onclick = function () {
                    const newName = prompt('Yangi Ism Sharif:', row.cells[0].innerText);
                    const newDate = prompt('Yangi kelgan kun:', row.cells[1].innerText);
                    const newTime = prompt('Yangi kelgan soat:', row.cells[2].innerText);
                    if (newName && newDate && newTime) {
                        row.cells[0].innerText = newName.trim();
                        row.cells[1].innerText = newDate.trim();
                        row.cells[2].innerText = newTime.trim();
                    }
                };

                const deleteBtn = document.createElement('button');
                deleteBtn.innerHTML = '<i class="fas fa-trash"></i>';
                deleteBtn.onclick = function () {
                    rowToDelete = row;
                    document.getElementById('confirmModal').style.display = 'block';
                };

                actionDiv.appendChild(editBtn);
                actionDiv.appendChild(deleteBtn);
                actionsCell.appendChild(actionDiv);
            });
        }

        function generateNumber() {
            let num = Math.floor(Math.random() * 9000) + 1000; // 1000 to 9999
            document.getElementById('generateNum').value = num;
        }

        function addWorker() {
            const firstname = document.getElementById('firstname').value.trim();
            const lastname = document.getElementById('lastname').value.trim();
            const email = document.getElementById('email').value.trim();
            const password = document.getElementById('password').value.trim();
            const genNum = document.getElementById('generateNum').value.trim();

            if (!firstname || !lastname || !email || !password || !genNum) {
                alert('Barcha maydonlarni to‘ldiring!');
                return;
            }

            const fullname = firstname + ' ' + lastname;
            const date = new Date().toLocaleDateString('uz-UZ');
            const time = new Date().toLocaleTimeString('uz-UZ', {hour: '2-digit', minute:'2-digit'});

            const table = document.getElementById('workerTable').getElementsByTagName('tbody')[0];
            const row = table.insertRow();
            row.insertCell(0).innerText = fullname;
            row.insertCell(1).innerText = date;
            row.insertCell(2).innerText = time;

            const actionsCell = row.insertCell(3);
            const actionDiv = document.createElement('div');
            actionDiv.className = 'action-buttons';

            const editBtn = document.createElement('button');
            editBtn.innerHTML = '<i class="fas fa-pen"></i>';
            editBtn.onclick = function () {
                const newName = prompt('Yangi Ism Sharif:', row.cells[0].innerText);
                const newDate = prompt('Yangi kelgan kun:', row.cells[1].innerText);
                const newTime = prompt('Yangi kelgan soat:', row.cells[2].innerText);
                if (newName && newDate && newTime) {
                    row.cells[0].innerText = newName.trim();
                    row.cells[1].innerText = newDate.trim();
                    row.cells[2].innerText = newTime.trim();
                }
            };

            const deleteBtn = document.createElement('button');
            deleteBtn.innerHTML = '<i class="fas fa-trash"></i>';
            deleteBtn.onclick = function () {
                rowToDelete = row;
                document.getElementById('confirmModal').style.display = 'block';
            };

            actionDiv.appendChild(editBtn);
            actionDiv.appendChild(deleteBtn);
            actionsCell.appendChild(actionDiv);

            closeAddModal();
            clearAddModalInputs();
        }

        function openAddModal() {
            document.getElementById('addModal').style.display = 'block';
        }

        function closeAddModal() {
            document.getElementById('addModal').style.display = 'none';
        }

        function clearAddModalInputs() {
            document.getElementById('firstname').value = '';
            document.getElementById('lastname').value = '';
            document.getElementById('email').value = '';
            document.getElementById('password').value = '';
            document.getElementById('generateNum').value = '';
        }

        document.getElementById('confirmDelete').onclick = function () {
            if (rowToDelete) {
                rowToDelete.remove();
                rowToDelete = null;
            }
            document.getElementById('confirmModal').style.display = 'none';
        };

        document.getElementById('cancelDelete').onclick = function () {
            rowToDelete = null;
            document.getElementById('confirmModal').style.display = 'none';
        };

        window.onclick = function(event) {
            if (event.target == document.getElementById('confirmModal')) {
                document.getElementById('confirmModal').style.display = 'none';
            }
            if (event.target == document.getElementById('addModal')) {
                document.getElementById('addModal').style.display = 'none';
            }
        };

        window.onload = populateTable;
    </script>
</body>
</html>
